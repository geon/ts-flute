var M=Object.defineProperty;var b=(t,e,i)=>e in t?M(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var m=(t,e,i)=>b(t,typeof e!="symbol"?e+"":e,i);(function(){"use strict";function t(o,s){class c extends AudioWorkletProcessor{constructor({processorOptions:a}){super();m(this,"toneOscilator");m(this,"midiMessages",[]);this.toneOscilator=s(a.sampleRate),this.toneOscilator.next(),this.port.onmessage=u=>{this.midiMessages.push(u.data)}}process(a,u,v){var h;const l=(h=u[0])==null?void 0:h[0];if(!l)throw new Error("Missing channel.");for(let f=0;f<l.length;f++)l[f]=this.toneOscilator.next(this.midiMessages.shift()).value;return!0}}registerProcessor(o,c)}function e(o){return 440*Math.pow(2,(o-69)/12)}var i=self.location.href;function*d(o){let s=1;for(;;){for(let c=0;c<o;++c)yield s;s*=-1}}function*p(o){const s=new Map;for(;;){const n=yield[...s.values()].map(r=>r.next().value).reduce((r,a)=>r+a,0)*.15;if(n){let r=s.get(n.number);switch(n.type){case"noteon":{if(!r){const a=e(n.number);r=d(o/a*.5),s.set(n.number,r)}break}case"noteoff":{s.delete(n.number);break}}}}}function g(){t(i,p)}g()})();
